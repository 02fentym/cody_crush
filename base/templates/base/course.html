{% extends "main.html" %}

{% block content %}

<h1>{{ course.title }}</h1>

<!-- Course Unit Cards -->
{% if units %}
<div class="flex flex-col gap-4">
    {% for unit in units %}
        {% include "base/components/unit_card.html" with unit=unit %}
    {% endfor %}
    {% else %}
    <p class="text-base-content/70">No topics available for this unit.</p>
    {% endif %}
</div>

<!-- Modal for creating new unit or topic -->
<input type="checkbox" id="shared-modal" class="modal-toggle" />
<div class="modal">
    <div class="modal-box">
        <h3 class="font-bold text-lg mb-4" id="modal-title">Create</h3>
        <form method="POST" class="space-y-4" id="shared-form">
            {% csrf_token %}
            <input type="hidden" name="form_type" id="form-type">
            <input type="hidden" name="unit_id" id="unit-id">

            <div id="form-fields">
                <!-- We'll dynamically inject form fields here -->
            </div>

            <div class="modal-action">
                <button type="submit" class="btn btn-primary">Create</button>
                <label for="shared-modal" class="btn">Cancel</label>
            </div>
        </form>
    </div>
</div>

<!-- Add Unit Button -->
<div class="flex justify-center mt-6">
    <label for="shared-modal" class="btn btn-primary rounded-full px-6 text-base cursor-pointer"
        onclick="openModal('unit')">
        + Unit
    </label>
</div>

{% endblock %}