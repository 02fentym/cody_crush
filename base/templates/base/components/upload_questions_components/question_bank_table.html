<div class="overflow-x-auto shadow rounded-lg mb-10 max-h-[200px]">
    <table class="table table-xs table-zebra w-full">
        <thead class="sticky top-0 bg-base-200 z-10">
            <tr>
                <th>
                    <a href="?sort_by=topic__unit__title&order={% if sort_by == 'topic__unit__title' and order == 'asc' %}desc{% else %}asc{% endif %}">
                        Unit
                        {% if sort_by == 'topic__unit__title' %}
                            {% if order == 'asc' %}↑{% else %}↓{% endif %}
                        {% endif %}
                    </a>
                </th>
                <th>
                    <a href="?sort_by=topic__title&order={% if sort_by == 'topic__title' and order == 'asc' %}desc{% else %}asc{% endif %}">
                        Topic
                        {% if sort_by == 'topic__title' %}
                            {% if order == 'asc' %}↑{% else %}↓{% endif %}
                        {% endif %}
                    </a>
                </th>
                <th>
                    <a href="?sort_by=prompt&order={% if sort_by == 'prompt' and order == 'asc' %}desc{% else %}asc{% endif %}">
                        Prompt
                        {% if sort_by == 'prompt' %}
                            {% if order == 'asc' %}↑{% else %}↓{% endif %}
                        {% endif %}
                    </a>
                </th>
                <th>
                    <a href="?sort_by=created&order={% if sort_by == 'created' and order == 'asc' %}desc{% else %}asc{% endif %}">
                        Created
                        {% if sort_by == 'created' %}
                            {% if order == 'asc' %}↑{% else %}↓{% endif %}
                        {% endif %}
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            {% for q in questions %}
            <tr hx-get="{% url row_url_name q.id %}"
                hx-target="#{{ form_container_id }}"
                hx-swap="innerHTML"
                class="cursor-pointer hover:bg-base-300 transition">

                <td>{{ q.topic.unit.title|truncatechars:30 }}</td>
                <td>{{ q.topic.title|truncatechars:30 }}</td>
                <td>{{ q.prompt|truncatechars:85 }}</td>
                <td>{{ q.created|date:"Y-m-d" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" class="text-center text-base-content/70">
                    No questions yet.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
