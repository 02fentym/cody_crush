{% extends "main.html" %}

{% block content %}
<h2>{{ quiz.topic.title }} - Results</h2>

<div>
    <p><strong>Score:</strong> {{ quiz.grade }}%</p>
</div>

{% for item in results %}
    <div>
        <p><strong>{{ forloop.counter }}. {{ item.question.prompt|safe }}</strong></p>

        {% if question_type == "multiple_choice" %}
            <div>a) {{ item.question.choice_a|safe }}</div>
            <div>b) {{ item.question.choice_b|safe }}</div>
            <div>c) {{ item.question.choice_c|safe }}</div>
            <div>d) {{ item.question.choice_d|safe }}</div>

            <p>Your answer: {{ item.answer.selected_choice }}</p>
            <p>Correct answer: {{ item.question.correct_choice }}</p>

            {% if item.answer.selected_choice == item.question.correct_choice %}
                <span style="color: green;">✅ Correct</span>
            {% else %}
                <span style="color: red;">❌ Incorrect</span>
            {% endif %}

        {% elif question_type == "tracing" %}
            <p>Your answer:</p>
            <pre>{{ item.answer.text_answer|safe }}</pre>

            <p>Expected output:</p>
            <pre>{{ item.question.expected_output|safe }}</pre>

            {% if item.answer.is_correct %}
                <span style="color: green;">✅ Correct</span>
            {% else %}
                <span style="color: red;">❌ Incorrect</span>
            {% endif %}
        {% endif %}

        <hr>
    </div>
{% endfor %}


{% endblock %}