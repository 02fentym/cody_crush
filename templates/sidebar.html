<aside class="w-80 bg-base-200 space-y-4 p-4">
    <!-- HOME -->
    <ul class="menu pb-2 mb-2 w-full">
        <li>
            <a href="{% url 'home' %}"
                class="{% if request.resolver_match.url_name == 'home' %}bg-base-300 font-semibold{% endif %}">
                <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                    fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                        d="m4 12 8-8 8 8M6 10.5V19a1 1 0 0 0 1 1h3v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h3a1 1 0 0 0 1-1v-8.5" />
                </svg>
                Home
            </a>
        </li>
    </ul>

    <!-- COURSE MANAGEMENT -->
    <ul class="menu pb-2 mb-2 w-full">
        <p class="menu-title">COURSE MANAGEMENT</p>
        <!-- ⭐️ added border-b here -->
        {% if courses %}
        {% for course in courses %}
        <li>
            <a href="{% url 'course' course.id %}"
                class="{% if course.id|stringformat:'s' == request.resolver_match.kwargs.course_id|stringformat:'s' %}bg-base-300 font-semibold{% endif %}">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="1">
                        <path d="M22 10v6M2 10l10-5l10 5l-10 5z" />
                        <path d="M6 12v5c3 3 9 3 12 0v-5" />
                    </g>
                </svg>
                {{ course.title }}
            </a>
        </li>
        {% endfor %}
        {% else %}
        <li><span class="text-base-content italic">No courses yet</span></li>
        {% endif %}
    </ul>

    <!-- TEACHING TOOLS -->
    {% if user.profile.role == "teacher" %}
    <ul class="menu pb-2 mb-2 w-full">
        <p class="menu-title">TEACHING TOOLS</p>
        <li><a href="{% url 'manage-units' %}"
                class="{% if request.resolver_match.url_name == 'manage-units' %}bg-base-300 font-semibold{% endif %}">
                <svg class="w-6 h-6 text-base-content" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24"
                    height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linejoin="round" stroke-width="1"
                        d="M4.07141 14v6h5.99999v-6H4.07141Zm4.5-4h6.99999l-3.5-6-3.49999 6Zm7.99999 10c1.933 0 3.5-1.567 3.5-3.5s-1.567-3.5-3.5-3.5-3.5 1.567-3.5 3.5 1.567 3.5 3.5 3.5Z" />
                </svg>

                Manage Units/Topics</a>
        </li>

        <li>
            <details id="question-bank-toggle">
                <summary class="cursor-pointer px-3 py-2 rounded">
                    <svg class="w-6 h-6 text-base-content" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                        width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                            d="M9.529 9.988a2.502 2.502 0 1 1 5 .191A2.441 2.441 0 0 1 12 12.582V14m-.01 3.008H12M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>

                    Question Bank
                </summary>
                <ul class="ml-4">
                    <li>
                        <a href="{% url 'question-bank' 'multiple_choice' %}"
                            class="{% if request.resolver_match.url_name == 'mc-questions' %}bg-base-300 font-semibold{% endif %}">
                            <svg class="w-6 h-6 text-base-content" xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1"
                                stroke-linejoin="round" stroke-linecap="round">
                                <!-- Grid -->
                                <rect x="3" y="3" width="18" height="18" rx="2" />
                                <rect x="27" y="3" width="18" height="18" rx="2" />
                                <rect x="3" y="27" width="18" height="18" rx="2" />
                                <rect x="27" y="27" width="18" height="18" rx="2" />

                                <!-- Letters -->
                                <text x="12" y="15" text-anchor="middle" font-size="10" fill="currentColor">A</text>
                                <text x="36" y="15" text-anchor="middle" font-size="10" fill="currentColor">B</text>
                                <text x="12" y="39" text-anchor="middle" font-size="10" fill="currentColor">C</text>
                                <text x="36" y="39" text-anchor="middle" font-size="10" fill="currentColor">D</text>
                            </svg>
                            Multiple Choice
                        </a>
                    </li>
                    <li class="">
                        <a href="{% url 'question-bank' 'tracing' %}"
                            class="{% if request.resolver_match.url_name == 'tracing-questions' %}bg-base-300 font-semibold{% endif %}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                                stroke="currentColor" stroke-width="1" viewBox="0 0 24 24">
                                <rect x="3" y="4" width="14" height="3" rx="1" />
                                <rect x="3" y="10" width="10" height="3" rx="1" />
                                <rect x="3" y="16" width="6" height="3" rx="1" />
                                <path d="M18 8l3 4-3 4" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>



                            Tracing
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'question-bank' 'code' %}">
                            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"
                                viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="1" d="m8 8-4 4 4 4m8 0 4-4-4-4m-2-3-4 14" />
                            </svg>
                            Code
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'question-bank' 'fill_in_the_blank' %}">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <rect x="2" y="2" width="20" height="20" stroke="#FFFFFF" stroke-width="1"
                                    fill="none" />
                                <text x="12" y="16" font-family="Arial" font-size="12" text-anchor="middle"
                                    fill="#FFFFFF">?</text>
                            </svg>
                            Fill in the Blank
                        </a>
                    </li>
                </ul>
            </details>
        </li>
    </ul>
    {% endif %}
</aside>

<script>
    const details = document.getElementById('question-bank-toggle');

    if (details) {
        const isOpen = localStorage.getItem('question-bank-open');
        if (isOpen === 'true') {
            details.setAttribute('open', '');
        } else {
            details.removeAttribute('open');
        }

        details.addEventListener('toggle', () => {
            localStorage.setItem('question-bank-open', details.open);
        });
    }
</script>